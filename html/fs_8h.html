<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>FatOS: kernel/IO/fs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FatOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_437c8b8cd7f1d4eda4759adcec27e61a.html">IO</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains all functions for filesystem handling.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;floppy.h&quot;</code><br />
<code>#include &quot;string.h&quot;</code><br />
<code>#include &quot;memory.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fs.h:</div>
<div class="dyncontent">
<div class="center"><img src="fs_8h__incl.png" border="0" usemap="#kernel_2IO_2fs_8h" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="fs_8h__dep__incl.png" border="0" usemap="#kernel_2IO_2fs_8hdep" alt=""/></div>
<!-- MAP 1 -->
</div>
</div>
<p><a href="fs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFileSystem.html">FileSystem</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure describing a FatOS filesystem. This allows for multiple filesystems to be supported (with multiple drives) and handled as a linked list.  <a href="structFileSystem.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa1a2354144363db6ffa13945261bda72"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa1a2354144363db6ffa13945261bda72"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#aa1a2354144363db6ffa13945261bda72">FAT_SECTORS</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:aa1a2354144363db6ffa13945261bda72"><td class="mdescLeft">&#160;</td><td class="mdescRight">the numbers of sectors in the FAT <br /></td></tr>
<tr class="separator:aa1a2354144363db6ffa13945261bda72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a192e613875b68b2937b81b4d90013d5c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a192e613875b68b2937b81b4d90013d5c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a192e613875b68b2937b81b4d90013d5c">FAT_FIRST</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a192e613875b68b2937b81b4d90013d5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">the id of the sector at which FAT is located (in LBA) <br /></td></tr>
<tr class="separator:a192e613875b68b2937b81b4d90013d5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a123b4db7da33229fcd39a1add053a2e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a123b4db7da33229fcd39a1add053a2e6">FAT_ENTRYAT</a>(fatPtr,  id)&#160;&#160;&#160;(*((unsigned short*)((int) fatPtr + 2*id)))</td></tr>
<tr class="memdesc:a123b4db7da33229fcd39a1add053a2e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns a pointer to a FAT entry of given FAT and entry id  <a href="#a123b4db7da33229fcd39a1add053a2e6">More...</a><br /></td></tr>
<tr class="separator:a123b4db7da33229fcd39a1add053a2e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa15446bba271846c31811b3442b6f463"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa15446bba271846c31811b3442b6f463"></a>
typedef struct <a class="el" href="structFileSystem.html">FileSystem</a>&#160;</td><td class="memItemRight" valign="bottom"><b>FileSystem</b></td></tr>
<tr class="separator:aa15446bba271846c31811b3442b6f463"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae2fa317cfdd786a8832bbed31c38fd37"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#ae2fa317cfdd786a8832bbed31c38fd37">filesystem_getNextSector</a> (unsigned short sector, <a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:ae2fa317cfdd786a8832bbed31c38fd37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets sector after a given sector in the FAT.  <a href="#ae2fa317cfdd786a8832bbed31c38fd37">More...</a><br /></td></tr>
<tr class="separator:ae2fa317cfdd786a8832bbed31c38fd37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a390f4b015f2b8581e23a01cb2d5825de"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a390f4b015f2b8581e23a01cb2d5825de">filesystem_getNextSectorRaw</a> (unsigned short sector, <a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:a390f4b015f2b8581e23a01cb2d5825de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets sector after a given sector in the FAT, without striping the 'used' flag (highest bit)  <a href="#a390f4b015f2b8581e23a01cb2d5825de">More...</a><br /></td></tr>
<tr class="separator:a390f4b015f2b8581e23a01cb2d5825de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5070e81d9dac49ec0d5b66277865db64"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a5070e81d9dac49ec0d5b66277865db64">filesystem_getNthSector</a> (unsigned short firstSector, int n, <a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:a5070e81d9dac49ec0d5b66277865db64"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets the Nth sector after a given sector in FAT. Indexing starts at 0.  <a href="#a5070e81d9dac49ec0d5b66277865db64">More...</a><br /></td></tr>
<tr class="separator:a5070e81d9dac49ec0d5b66277865db64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9d896e6b5f1146e56933c414e43f6b8"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#aa9d896e6b5f1146e56933c414e43f6b8">filesystem_getLastSector</a> (unsigned short firstSector, <a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:aa9d896e6b5f1146e56933c414e43f6b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets the last sector of a chain of sectors in the FAT  <a href="#aa9d896e6b5f1146e56933c414e43f6b8">More...</a><br /></td></tr>
<tr class="separator:aa9d896e6b5f1146e56933c414e43f6b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e61145d8b1d84f4717b779f67fe0d09"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e61145d8b1d84f4717b779f67fe0d09"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a5e61145d8b1d84f4717b779f67fe0d09">filesystems_init</a> ()</td></tr>
<tr class="memdesc:a5e61145d8b1d84f4717b779f67fe0d09"><td class="mdescLeft">&#160;</td><td class="mdescRight">initializes all filesystems accessible (one per detected floppy drive). SO FAR : ONLY boot filesystem <br /></td></tr>
<tr class="separator:a5e61145d8b1d84f4717b779f67fe0d09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48b7d3fbd59a08faf39f5f8de1f91fb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a48b7d3fbd59a08faf39f5f8de1f91fb2">filesystem_init</a> (<a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:a48b7d3fbd59a08faf39f5f8de1f91fb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">init file system (especially load file table at the given address)  <a href="#a48b7d3fbd59a08faf39f5f8de1f91fb2">More...</a><br /></td></tr>
<tr class="separator:a48b7d3fbd59a08faf39f5f8de1f91fb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7f60cb91a08d641147a06c42b6ecb08"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#af7f60cb91a08d641147a06c42b6ecb08">filesystem_getFileSectors</a> (unsigned short firstSector, <a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:af7f60cb91a08d641147a06c42b6ecb08"><td class="mdescLeft">&#160;</td><td class="mdescRight">computes number of sector a file actual uses (based on FAT, not on advertised size). Based on the first sector. Reads it from FAT loaded into memory.  <a href="#af7f60cb91a08d641147a06c42b6ecb08">More...</a><br /></td></tr>
<tr class="separator:af7f60cb91a08d641147a06c42b6ecb08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1625d259df79b08baf9d65549f55ce6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#ae1625d259df79b08baf9d65549f55ce6">filesystem_readbytesByFirstSector</a> (unsigned short firstSector, int startByte, int length, char *buffer, <a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:ae1625d259df79b08baf9d65549f55ce6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the given amount of bytes from file given at first sector into provided buffer.  <a href="#ae1625d259df79b08baf9d65549f55ce6">More...</a><br /></td></tr>
<tr class="separator:ae1625d259df79b08baf9d65549f55ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28dc09bfbc44eed8e7db6ff1ea5c7f89"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a28dc09bfbc44eed8e7db6ff1ea5c7f89">filesystem_writebytesByFirstSector</a> (unsigned short firstSector, int startByte, int length, char *buffer, <a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:a28dc09bfbc44eed8e7db6ff1ea5c7f89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the given amount of bytes from given buffer at sector indicated returns -1 upon error, 0 upon success.  <a href="#a28dc09bfbc44eed8e7db6ff1ea5c7f89">More...</a><br /></td></tr>
<tr class="separator:a28dc09bfbc44eed8e7db6ff1ea5c7f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ad05734e91206f61419583e3cca0ca1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a1ad05734e91206f61419583e3cca0ca1">getFirstFileSystem</a> ()</td></tr>
<tr class="memdesc:a1ad05734e91206f61419583e3cca0ca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the first filesystem handled by the filesystem handler (boot filesystem)  <a href="#a1ad05734e91206f61419583e3cca0ca1">More...</a><br /></td></tr>
<tr class="separator:a1ad05734e91206f61419583e3cca0ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace483733f6ae5d8ffdfb83b70cc87439"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#ace483733f6ae5d8ffdfb83b70cc87439">filesystem_LoadFileList</a> (<a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:ace483733f6ae5d8ffdfb83b70cc87439"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the filetable for a given filesystem.  <a href="#ace483733f6ae5d8ffdfb83b70cc87439">More...</a><br /></td></tr>
<tr class="separator:ace483733f6ae5d8ffdfb83b70cc87439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21807adf804016925a5afdd1681d0337"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a21807adf804016925a5afdd1681d0337">getFileSystemByDriveId</a> (int id)</td></tr>
<tr class="memdesc:a21807adf804016925a5afdd1681d0337"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pointer to the filesystem of given drive ID.  <a href="#a21807adf804016925a5afdd1681d0337">More...</a><br /></td></tr>
<tr class="separator:a21807adf804016925a5afdd1681d0337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3afad77c0cc7fa4f2531823f114b55d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#ac3afad77c0cc7fa4f2531823f114b55d">filesystem_list</a> (char *fileListData, int length)</td></tr>
<tr class="memdesc:ac3afad77c0cc7fa4f2531823f114b55d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the content of a given fileList (loaded at given position in memory, with given size)  <a href="#ac3afad77c0cc7fa4f2531823f114b55d">More...</a><br /></td></tr>
<tr class="separator:ac3afad77c0cc7fa4f2531823f114b55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a6f4c6e6cf150d690db30f80f86f3a3"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a7a6f4c6e6cf150d690db30f80f86f3a3">filesystem_findFirstSector</a> (char *filename, char *filelist, int size)</td></tr>
<tr class="memdesc:a7a6f4c6e6cf150d690db30f80f86f3a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find first sector of entry of specified name in table loaded in buffer, of given size.  <a href="#a7a6f4c6e6cf150d690db30f80f86f3a3">More...</a><br /></td></tr>
<tr class="separator:a7a6f4c6e6cf150d690db30f80f86f3a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af97097602947d83628da0cc7575e6d68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#af97097602947d83628da0cc7575e6d68">filesystem_setNextSector</a> (unsigned short start, unsigned short next, <a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:af97097602947d83628da0cc7575e6d68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the next sector in the FAT loaded in memory (does not rewrite it in drive)  <a href="#af97097602947d83628da0cc7575e6d68">More...</a><br /></td></tr>
<tr class="separator:af97097602947d83628da0cc7575e6d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcd59fe130a0f3372490826cafd0b368"><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#adcd59fe130a0f3372490826cafd0b368">filesystem_findEmptySector</a> (unsigned short first, <a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:adcd59fe130a0f3372490826cafd0b368"><td class="mdescLeft">&#160;</td><td class="mdescRight">This finds an empty sector to write to, after a given first one (initial value, set to 0 if all drive)  <a href="#adcd59fe130a0f3372490826cafd0b368">More...</a><br /></td></tr>
<tr class="separator:adcd59fe130a0f3372490826cafd0b368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cb94822594eed6ea6d6fc70ad312132"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a9cb94822594eed6ea6d6fc70ad312132">filesystem_appendSectors</a> (unsigned short first, int count, int rewrite, <a class="el" href="structFileSystem.html">FileSystem</a> *fs)</td></tr>
<tr class="memdesc:a9cb94822594eed6ea6d6fc70ad312132"><td class="mdescLeft">&#160;</td><td class="mdescRight">This adds sectors at the end of chained list of sectors in FAT. Rewrites FAT into drive if specified so.  <a href="#a9cb94822594eed6ea6d6fc70ad312132">More...</a><br /></td></tr>
<tr class="separator:a9cb94822594eed6ea6d6fc70ad312132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31b748bb1fc56b6ea63fb09ab264e1af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a31b748bb1fc56b6ea63fb09ab264e1af">filesystem_appendBytes</a> (<a class="el" href="structFileSystem.html">FileSystem</a> *fs, char *fileListData, int size, char *filename, int bytesToAppend)</td></tr>
<tr class="memdesc:a31b748bb1fc56b6ea63fb09ab264e1af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends bytes to the selected file.  <a href="#a31b748bb1fc56b6ea63fb09ab264e1af">More...</a><br /></td></tr>
<tr class="separator:a31b748bb1fc56b6ea63fb09ab264e1af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9ddca40b7784df3ea88ee42e377c8ab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#ac9ddca40b7784df3ea88ee42e377c8ab">filesystem_getBytes</a> (char *fileListData, int length, char *filename)</td></tr>
<tr class="memdesc:ac9ddca40b7784df3ea88ee42e377c8ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of bytes of a file in a given filelist.  <a href="#ac9ddca40b7784df3ea88ee42e377c8ab">More...</a><br /></td></tr>
<tr class="separator:ac9ddca40b7784df3ea88ee42e377c8ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a660275e7124558934e27e719da914611"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a660275e7124558934e27e719da914611">filesystem_setBytes</a> (char *fileListData, int length, char *filename, int newSize)</td></tr>
<tr class="memdesc:a660275e7124558934e27e719da914611"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets the number of bytes of file in a given filelist.  <a href="#a660275e7124558934e27e719da914611">More...</a><br /></td></tr>
<tr class="separator:a660275e7124558934e27e719da914611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80761cf439249119de3365917b900756"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a80761cf439249119de3365917b900756">filesystem_loadSubFileList</a> (<a class="el" href="structFileSystem.html">FileSystem</a> *fs, char *fileListData, int size, char *subFileListName, char **resBuffer)</td></tr>
<tr class="memdesc:a80761cf439249119de3365917b900756"><td class="mdescLeft">&#160;</td><td class="mdescRight">loads a subfilelist into an allocated buffer. This buffer needs to be freed after using sys_free.  <a href="#a80761cf439249119de3365917b900756">More...</a><br /></td></tr>
<tr class="separator:a80761cf439249119de3365917b900756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab45141e3c3e153cb1f2ba574236898fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#ab45141e3c3e153cb1f2ba574236898fd">filesystem_subList</a> (<a class="el" href="structFileSystem.html">FileSystem</a> *fs, char *fileListData, int size, char *subListName)</td></tr>
<tr class="memdesc:ab45141e3c3e153cb1f2ba574236898fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lists through a path ex. /subdir/ recursively until destination reached.  <a href="#ab45141e3c3e153cb1f2ba574236898fd">More...</a><br /></td></tr>
<tr class="separator:ab45141e3c3e153cb1f2ba574236898fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a544404a685670d00a0c09e3dc1886595"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8h.html#a544404a685670d00a0c09e3dc1886595">filesystems_driveList</a> (char *fullPath)</td></tr>
<tr class="memdesc:a544404a685670d00a0c09e3dc1886595"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lists the contents of a given directory. End user function, supports complete path, including drive id. Supports 1-digits drives ids (0-9)  <a href="#a544404a685670d00a0c09e3dc1886595">More...</a><br /></td></tr>
<tr class="separator:a544404a685670d00a0c09e3dc1886595"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a98249ea643b2b39f434ba38eea3e627f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a98249ea643b2b39f434ba38eea3e627f"></a>
struct <a class="el" href="structFileSystem.html">FileSystem</a>&#160;</td><td class="memItemRight" valign="bottom"><b>__attribute__</b></td></tr>
<tr class="separator:a98249ea643b2b39f434ba38eea3e627f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains all functions for filesystem handling. </p>
<dl class="section author"><dt>Author</dt><dd>Anton CLAES </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2017 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a123b4db7da33229fcd39a1add053a2e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FAT_ENTRYAT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fatPtr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">id&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(*((unsigned short*)((int) fatPtr + 2*id)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns a pointer to a FAT entry of given FAT and entry id </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fatPtr</td><td>a pointer to the FAT in memory </td></tr>
    <tr><td class="paramname">id</td><td>the id of the entry (indexed start at 0) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a31b748bb1fc56b6ea63fb09ab264e1af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filesystem_appendBytes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileListData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bytesToAppend</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Appends bytes to the selected file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>the filesystem on which to operate changes </td></tr>
    <tr><td class="paramname">fileListData</td><td>the filelist on which to operate changes </td></tr>
    <tr><td class="paramname">size</td><td>the length in bytes of the filelist </td></tr>
    <tr><td class="paramname">filename</td><td>the name of the files to add bytes to </td></tr>
    <tr><td class="paramname">bytesToAppend</td><td>the amount of bytes to be appened  modifies FAT and filelist where the file is identified </td></tr>
  </table>
  </dd>
</dl>
<p>TODO HERE </p>

</div>
</div>
<a class="anchor" id="a9cb94822594eed6ea6d6fc70ad312132"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filesystem_appendSectors </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rewrite</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This adds sectors at the end of chained list of sectors in FAT. Rewrites FAT into drive if specified so. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">first</td><td>a sector in a chain at the end of which to add sectors </td></tr>
    <tr><td class="paramname">count</td><td>the number of sectors to add </td></tr>
    <tr><td class="paramname">rewrite</td><td>: 1 to rewrite FAT to disk, 0 to just update memory </td></tr>
    <tr><td class="paramname">fs</td><td>the filesystem on which to operate changes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 upon success </dd></dl>

</div>
</div>
<a class="anchor" id="adcd59fe130a0f3372490826cafd0b368"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short filesystem_findEmptySector </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This finds an empty sector to write to, after a given first one (initial value, set to 0 if all drive) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">first</td><td>to first sector after which to look for an empty one </td></tr>
    <tr><td class="paramname">fs</td><td>the filesystem on which to perform operations </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the sector found (0 upon failure) </dd></dl>

</div>
</div>
<a class="anchor" id="a7a6f4c6e6cf150d690db30f80f86f3a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short filesystem_findFirstSector </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filelist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find first sector of entry of specified name in table loaded in buffer, of given size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>a string representing the filename in the filelist </td></tr>
    <tr><td class="paramname">filelist</td><td>the filelist loaded in memory </td></tr>
    <tr><td class="paramname">size</td><td>the size of the filelist </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the first sector of the file as advertised in the filelist </dd></dl>

</div>
</div>
<a class="anchor" id="ac9ddca40b7784df3ea88ee42e377c8ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filesystem_getBytes </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileListData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of bytes of a file in a given filelist. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileListData</td><td>the filelist into which to look for the file </td></tr>
    <tr><td class="paramname">length</td><td>the length of the filelist </td></tr>
    <tr><td class="paramname">filename</td><td>the name of the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if not found, the number of bytes of the files as indicated by the filelist otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="af7f60cb91a08d641147a06c42b6ecb08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short filesystem_getFileSectors </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>firstSector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>computes number of sector a file actual uses (based on FAT, not on advertised size). Based on the first sector. Reads it from FAT loaded into memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">firstector</td><td>the firstsector of the file. If the sector is not the first one it will return the number of sectors until the end of the file </td></tr>
    <tr><td class="paramname">fs</td><td>the filesystem to read from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the id of the last sector of the file </dd></dl>

</div>
</div>
<a class="anchor" id="aa9d896e6b5f1146e56933c414e43f6b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short filesystem_getLastSector </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>firstSector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gets the last sector of a chain of sectors in the FAT </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">first</td><td>sector any sector in the chain to start with </td></tr>
    <tr><td class="paramname">fs</td><td>the filesystem to get the FAT from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the id of the last sector in the chain </dd></dl>

</div>
</div>
<a class="anchor" id="ae2fa317cfdd786a8832bbed31c38fd37"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short filesystem_getNextSector </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets sector after a given sector in the FAT. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sector</td><td>the current sector </td></tr>
    <tr><td class="paramname">fs</td><td>the filesystem to get the FAT from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next sector's id in LBA, 0 if no next sector </dd></dl>

</div>
</div>
<a class="anchor" id="a390f4b015f2b8581e23a01cb2d5825de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short filesystem_getNextSectorRaw </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets sector after a given sector in the FAT, without striping the 'used' flag (highest bit) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sector</td><td>the current sector </td></tr>
    <tr><td class="paramname">fs</td><td>the filesystem to get the FAT from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next sector's id in LBA, 0 if no next sector, with the used flag not striped </dd></dl>

</div>
</div>
<a class="anchor" id="a5070e81d9dac49ec0d5b66277865db64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short filesystem_getNthSector </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>firstSector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gets the Nth sector after a given sector in FAT. Indexing starts at 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">firstSector</td><td>the firstSector to seek from (not necessarely the first sector of the file) </td></tr>
    <tr><td class="paramname">n</td><td>the number of sectors to skip (n=0 returns the firstSector) </td></tr>
    <tr><td class="paramname">fs</td><td>the filesystem to get the FAT from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the id of the Nth sector </dd></dl>

</div>
</div>
<a class="anchor" id="a48b7d3fbd59a08faf39f5f8de1f91fb2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void filesystem_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>init file system (especially load file table at the given address) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>the filesystem to initialize </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac3afad77c0cc7fa4f2531823f114b55d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void filesystem_list </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileListData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints the content of a given fileList (loaded at given position in memory, with given size) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileListData</td><td>the filelist (loaded in memory) </td></tr>
    <tr><td class="paramname">length</td><td>the length of the filelist </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ace483733f6ae5d8ffdfb83b70cc87439"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void filesystem_LoadFileList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads the filetable for a given filesystem. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>the filesystem for which to load the root filelist (located at sector 11) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a80761cf439249119de3365917b900756"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filesystem_loadSubFileList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileListData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>subFileListName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>resBuffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>loads a subfilelist into an allocated buffer. This buffer needs to be freed after using sys_free. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>the filesystem from which to load the sub filelist </td></tr>
    <tr><td class="paramname">fileListData</td><td>the current filelist into which to look for the subFileList (works recursively) </td></tr>
    <tr><td class="paramname">size</td><td>the size of the current filelist in bytes </td></tr>
    <tr><td class="paramname">subFileListName</td><td>the name of the subFileList(directory to look for) </td></tr>
    <tr><td class="paramname">resBuffer</td><td>that will be allocated and into which the subfilelist will be loaded into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the size of the loaded subfilelist in bytes, -1 if failed </dd></dl>

</div>
</div>
<a class="anchor" id="ae1625d259df79b08baf9d65549f55ce6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filesystem_readbytesByFirstSector </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>firstSector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>startByte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the given amount of bytes from file given at first sector into provided buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">firstSector</td><td>the firstSector of the file </td></tr>
    <tr><td class="paramname">startByte</td><td>the firstByte to read </td></tr>
    <tr><td class="paramname">length</td><td>the number of bytes to read </td></tr>
    <tr><td class="paramname">a</td><td>buffer to read into </td></tr>
    <tr><td class="paramname">fs</td><td>the filesystem to read from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 upon error, 0 upon success </dd></dl>

</div>
</div>
<a class="anchor" id="a660275e7124558934e27e719da914611"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filesystem_setBytes </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileListData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sets the number of bytes of file in a given filelist. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileListData</td><td>the filelist into which to look for the file </td></tr>
    <tr><td class="paramname">length</td><td>the length of the filelist </td></tr>
    <tr><td class="paramname">filename</td><td>the name of the file </td></tr>
    <tr><td class="paramname">newSize</td><td>the size to be set to the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 if not found </dd></dl>

</div>
</div>
<a class="anchor" id="af97097602947d83628da0cc7575e6d68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void filesystem_setNextSector </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>next</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the next sector in the FAT loaded in memory (does not rewrite it in drive) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>the sector to set the next one to </td></tr>
    <tr><td class="paramname">next</td><td>the sector to be written as following the "start" one </td></tr>
    <tr><td class="paramname">fs</td><td>the filesystem on whose FAT to operate changes on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab45141e3c3e153cb1f2ba574236898fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filesystem_subList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileListData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>subListName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lists through a path ex. /subdir/ recursively until destination reached. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>the filesystem into which to look for the sublist </td></tr>
    <tr><td class="paramname">fileListData</td><td>the current filelist </td></tr>
    <tr><td class="paramname">size</td><td>the size of the current filelist </td></tr>
    <tr><td class="paramname">subListName</td><td>the name of the sublist to look for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 upon failure, 0 upon success </dd></dl>

</div>
</div>
<a class="anchor" id="a28dc09bfbc44eed8e7db6ff1ea5c7f89"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filesystem_writebytesByFirstSector </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>firstSector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>startByte</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structFileSystem.html">FileSystem</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the given amount of bytes from given buffer at sector indicated returns -1 upon error, 0 upon success. </p>
<ul>
<li>firstSector the first sector of the file</li>
<li>startByte the first byte to write too</li>
<li>length the number of bytes to write</li>
<li>fs the filesystem to write into</li>
</ul>
<p>If the required data writes beyond file limit then the function will fail. It will not append sectors to the file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">firstSector</td><td>the firstSector of the file </td></tr>
    <tr><td class="paramname">startByte</td><td>the firstByte to write </td></tr>
    <tr><td class="paramname">length</td><td>the number of bytes to write </td></tr>
    <tr><td class="paramname">a</td><td>buffer to read from </td></tr>
    <tr><td class="paramname">fs</td><td>the filesystem to write to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 upon error, 0 upon success </dd></dl>

</div>
</div>
<a class="anchor" id="a544404a685670d00a0c09e3dc1886595"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filesystems_driveList </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fullPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lists the contents of a given directory. End user function, supports complete path, including drive id. Supports 1-digits drives ids (0-9) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fullPath</td><td>the absolute path to the directory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 upon failure </dd></dl>

</div>
</div>
<a class="anchor" id="a21807adf804016925a5afdd1681d0337"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structFileSystem.html">FileSystem</a>* getFileSystemByDriveId </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a pointer to the filesystem of given drive ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the drive's id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the filesystem's structure </dd></dl>

</div>
</div>
<a class="anchor" id="a1ad05734e91206f61419583e3cca0ca1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structFileSystem.html">FileSystem</a>* getFirstFileSystem </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the first filesystem handled by the filesystem handler (boot filesystem) </p>
<dl class="section return"><dt>Returns</dt><dd>a pointer a filesystem structure representing the first filesystem </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
